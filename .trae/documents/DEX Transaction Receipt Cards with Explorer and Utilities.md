## Scope
Enhance `dex/index.html` with a modular, accessible receipt/card system that renders both successful and failed transactions, integrates explorer links by network, and adds print/export utilities with inline unit tests. No new files; all changes contained within the existing HTML/CSS/JS.

## UI Components
1. Add a dedicated `#tx-receipts` container near the main content.
2. Create reusable receipt card markup generated by JS:
   - Header with status badge (Success/Failed) and timestamp.
   - Body showing: transaction hash (clickable), from/to addresses, token amount and symbol, gas fee, network name/chain ID.
   - Footer with buttons: `Print`, `Download Image`.
3. Visual styling:
   - Success: green theme; Failed: red theme with high contrast.
   - Mobile-first responsive layout (single column) with desktop grid for details.

## Explorer Integration
1. Add a chain→explorer map in JS:
   - `42420 (Assetchain) → https://scan.assetchain.org` (Blockscout)
   - Template: `tx: /tx/<hash>`, `address: /address/<addr>`
2. Utility `buildExplorerUrl(kind, chainId, value)` that validates hex strings and returns a safe URL. Unknown chain falls back to plain text (no link).

## JS Utilities
1. `renderReceipt(model)` create DOM for a receipt card using `textContent` for dynamic fields to prevent XSS.
2. `formatAddress(addr)` shortens address for display while keeping full value in `title`.
3. `formatAmountWei(wei, decimals)` returns formatted token amount with symbol (`CNGN`).
4. `computeGasFee(receipt)` multiplies `gasUsed * effectiveGasPrice` and formats in `ASET` and NGN (optional if RPC returns price).
5. `printReceipt(node)` opens print with CSS `@media print` rules; focus to selected card.
6. `exportReceiptAsImage(node, type='png')` uses SVG `foreignObject` + Canvas to capture the card; fallback to JPEG.
7. `showLoading(target)` / `hideLoading(target)` for fetch/verify phases with ARIA live region updates.

## Error Handling & Loading States
1. In `handleSend`:
   - On send success: build success model using `receipt`, `userAddress`, `target`, `amountWeiBN`, and network via `signer.provider.getNetwork()`.
   - After backend verify (`out.status`), include backend status and message fields on card.
2. On any exception or backend failure:
   - Build failure model including error message, attempted amount, from/to, and chain; no hash if not available.
3. Ensure all async stages update a visible loading indicator with `aria-live="polite"`.

## Accessibility & Security
- Use `textContent` for dynamic text; sanitize hex via regex before linking.
- Buttons with `role="button"`, `aria-label`, keyboard focus states.
- Status badge marked with `aria-label` and `aria-live` for updates.
- High-contrast colors meeting WCAG AA; avoid only-color cues (include icons/text).

## Unit Tests (Inline)
- Add a tiny test harness that runs when `?test=1`:
  - Tests for `buildExplorerUrl`, `formatAddress`, `formatAmountWei`, `computeGasFee`, `exportReceiptAsImage` (promise resolves), `printReceipt` (returns true/doesn’t throw).
  - Results rendered to a hidden panel and logged to console.
- No external libs; use simple assertions.

## Performance & Cross-Browser
- Minimize reflows by building receipt DOM fragments before insertion.
- Use `requestAnimationFrame` for UI updates.
- Image export uses Canvas + SVG foreignObject (supported modern browsers); graceful fallback to print if unsupported.
- Lazy compute NGN conversion only if price data available; otherwise skip.

## Integration Points
- Extend existing `handleSend(service)`:
  - After `tx.wait()` create `successModel` and call `renderReceipt`.
  - After `verifyAndFulfil` call, update the card with backend status/message.
  - In `catch(e)`/failed backend, create `failureModel` and call `renderReceipt`.
- Add global `#tx-receipts` container and styles.

## Acceptance Criteria
- Successful and failed transactions produce a card with all required fields.
- Transaction hash is clickable to the correct explorer URL for Assetchain.
- Print and Download as Image work on desktop and mobile (modern browsers).
- Loading indicators and ARIA labels are present; no XSS risks.
- Tests pass when visiting `index.html?test=1`.

Confirm to proceed and I will implement these changes directly in `dex/index.html`. 